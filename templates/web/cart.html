{% extends 'base/base.html' %}

{% load static %}

{% block container %}




    
    {% if carts %}

        <header class="h-[80px] shadow-md">
            <section class="wrapper h-full flex justify-start items-center">
                <div class="w-[30%] md:w-[38%] lg:w-[42%]">
                    <a href="{% url 'web:single_restaurant' id=store.id %}">
                        <img src="{% static 'web/images/arrow.png' %}" alt="" class="w-[16px] md:w-[25px]">
                    </a>
                </div>

                <div class="w-[70%] md:w-[62%] lg:w-[58%]">
                    <h1 class="text-[26px] md:text-[34px] font-bold text-[#515151]">Cart</h1>
                </div>
            </section>
        </header>



        <section class="py-10 px-4 lg:px-[25%]">
  <section class="wrapper">
    <div class="rounded-lg shadow-lg border p-5">
      <a href="" class="flex flex-col md:flex-row justify-start items-start">
        
        <!-- Store Image -->
        <img src="{{store.image.url}}" 
             alt="{{store.name}}" 
             class="w-full md:w-[30%] rounded-lg mb-4 md:mb-0 md:mr-6">
        
        <!-- Store Info -->
        <div class="w-full md:w-[70%]">
          <h3 class="text-[#515151] text-2xl md:text-3xl font-semibold mb-2 mt-1 md:mt-3">
            {{store.name}}
          </h3>
          <p class="text-[#515151] text-base md:text-lg">
            {{store.tagline}}
          </p>

          <!-- Rating & Time -->
          <div class="flex flex-wrap items-center gap-4 mt-3 text-sm md:text-base">
            <div class="flex items-center gap-1 text-amber-500">
              <i class="fas fa-star text-lg"></i>
              <span class="font-semibold">{{store.rating}}</span>
            </div>
            <div class="flex items-center gap-2 text-slate-600">
              <i class="fas fa-clock text-green-600"></i>
              <p>{{store.time}} min</p>
            </div>
          </div>

          <!-- Offer -->
          <div class="mt-3 inline-flex items-center gap-2 rounded-full">
            <i class="fas fa-tag text-red-600 text-lg"></i>
            <span class="text-red-600 font-semibold">{{store.offer}}</span>
          </div>
        </div>
      </a>                   
    </div>
  </section>
</section>




        <section class="py-10 lg:px-[25%] mb-14 lg:mb-0">
            <section class="wrapper">
                <div class="rounded-lg shadow-md border p-5 mb-5">
                    <h2 class="text-[#515151] text-[16px] font-semibold border-b pb-2">ITEM IN CART</h2>
                    {% for cart in carts %}
                    <div class="mt-3 flex justify-between items-center border-b pb-2 mb-3">
                        <div class="">
                            <p class="text-[#515151] text-[14px] font-semibold">{{cart.product}}</p>
                            <p class="text-[14px] font-bold">₹ {{cart.amnt}}</p>
                        </div>
                        <div class="border rounded-lg md:mr-24">
                            <a href="{% url 'web:cart_minus' id=cart.id %}"><button class="py-2 px-3 bg-[#2AC489] rounded-s-lg text-white font-semibold">-</button></a>
                            <span class="ml-3 mr-3">{{cart.qty}}</span>
                            <a href="{% url 'web:cart_plus' id=cart.id %}"><button class="py-2 px-3 bg-[#2AC489] rounded-e-lg text-white font-semibold">+</button></a>
                        </div>
                    </div>
                    {% endfor %}
                </div>



                <div class="rounded-lg shadow-md border p-5 mb-5">
                    <div class="mt-3 flex justify-between items-center border-b pb-5 mb-3">
                        <div class="">
                            <input type="text" placeholder="Coupen Code" class="text-[16px] font-semibold border-none outline-none">
                        </div>
                        <div class="rounded-lg">
                            <button class="py-2 px-8 md:px-12 bg-[#2AC489] rounded-lg mr-5 text-white font-semibold">Apply</button>
                        </div>
                    </div>

                    <div class="mt-3 flex justify-start items-center mb-2">
                        <img src="{% static 'web/images/discount.png' %}" alt="" class="w-[19px] mr-4" >
                        <a href="{% url 'web:offers' %}" class=""><p class="text-red-500 font-bold">View All Offers</p></a>
                    </div>             
                </div>




                <div class="rounded-lg shadow-md border p-5 mb-5">
                    <h2 class="text-[#515151] text-[16px] font-bold">BILL DETAILS</h2>
                    <div class="mt-3 flex justify-between items-center border-b pb-2 mb-3">
                        <p class="text-[#515151] text-[14px] font-semibold">Item Total</p>
                        <p class="text-[14px] font-bold text-[#515151]">₹ {{sub_total}}</p>
                    </div>

                    <div class="mt-3 flex justify-between items-center border-b pb-2 mb-3">
                        <p class="text-[#515151] text-[14px] font-semibold">Offer Applied</p>
                        <p class="text-[14px] font-bold text-[#515151]">-₹ {{cart_bill.offer_amnt}}</p>
                    </div>

                    <div class="mt-3 flex justify-between items-center border-b pb-2 mb-3">
                        <p class="text-[#515151] text-[14px] font-semibold">Delivery Charges (4km)</p>
                        <p class="text-[14px] font-bold text-[#515151]">₹ {{cart_bill.delivery_charge}}</p>
                    </div>

                    <div class="mt-3 flex justify-between items-center mb-3">
                        <p class="text-[14px] font-semibold">To Pay</p>
                        <p class="text-[14px] font-bold">₹ {{total}}</p>
                    </div>
                </div>



                {% if selected_address %}
                    <div class="rounded-lg shadow-md border p-5 mb-5">
                        <div class="mt-3 border-b pb-5 mb-3">
                            <p class="text-[#515151] font-bold">DELIVER TO</p>
                        </div>

                        <div class="mt-3 flex justify-between items-center mb-3">
                            <div class="">
                                <p class="text-[#515151] text-[16px] font-semibold">{{selected_address.address}}</p>
                            </div>
                            <a href="{% url 'web:address' %}" class="rounded-lg">
                                <button class="py-2 px-6 md:px-12 bg-[#2AC489] rounded-lg mr-5 text-white font-semibold">CHANGE</button>
                            </a>
                        </div>
                    </div>

                    <a href="{% url 'web:checkout' %}" class="bg-red-500 px-4 rounded-xl h-[50px] flex justify-center items-center mb-6 cursor-pointer">
                        <p class="text-[16px] text-white font-semibold">CONTINUE</p>   
                    </a>
                {% else %}
                    <div class="mt-5 flex justify-between items-center rounded-lg shadow-md border p-5 mb-5">
                        <div class="">
                            <p class="text-[#515151] text-[16px] font-semibold">Add address</p>
                        </div>
                        <a href="{% url 'web:address' %}" class="rounded-lg">
                            <button class="py-2 px-6 md:px-12 bg-[#2AC489] rounded-lg mr-5 text-white font-semibold">ADD</button>
                        </a>
                    </div>

                    <a href="" class="bg-red-500 px-4 rounded-xl h-[50px] flex justify-center items-center mb-6 cursor-not-allowed">
                        <p class="text-[16px] text-[#b6b4b4] font-semibold">CONTINUE</p>   
                    </a>
                {% endif %}
                
                




                
            </section>
        </section>

    {% else %}

        {% include 'include/header.html' %}

        <h3 class="py-40 h-screen text-center text-[30px] font-semibold text-red-500">Cart Not Found</h3>

        {% include 'include/footer.html' %}
    
        
    {% endif %}    


    

{% endblock %}

